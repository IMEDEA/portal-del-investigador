<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>CORE: Módulo de Gestión Centralizada</title>
        <link rel="stylesheet" href="/investigacion/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/investigacion/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="/investigacion/pages/contacto.html">Contacto</a></li>
                    <li><a href="/investigacion/pages/como-contribuir.html">Cómo Contribuir</a></li>
                    <li class="active"><a href="/investigacion/core.html">CORE: Módulo de Gestión Centralizada</a></li>
                    <li><a href="/investigacion/cvn.html">CVN: Módulo de Gestión del Currículum Vitae Normalizado</a></li>
                    <li><a href="/investigacion/">Portal del Investigador</a></li>
                    <li><a href="/investigacion/pages/instalacion.html">Instalación</a></li>
                    <li><a href="/investigacion/pages/desarrolladores.html">Desarrolladores</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">CORE: Módulo de Gestión Centralizada</h1>
    
    <h2 id="admincommands">Admin Commands</h2>

<h3 class="page-header">CRON</h3>

<p>
    Los siguientes comandos de administración necesitan ser ejecutados regularmente, por lo que es necesaria su inclusión en el CRON del sistema.
</p>

<div class="section">
    <ul class="nav nav-tabs header">
        <li class="active">Actualización del Código de RRHH de los usuarios</li>
    </ul>
    <div class="content">
        <div class="row-fluid">
            <div class="alert alert-info"><b>core/management/commands/sync_rrhh.py</b></div>
            <p>
                Actualiza el Código de Recursos Humanos de cada usuario (campo rrhh_code del modelo UserProfile).
                Este código identifica de manera única a un usuario en la aplicación de Recursos Humanos de la 
                Universidad de La Laguna, por lo que se emplea como clave para obtener información del usuario 
                mediante la llamada a distintos Web Services.
            </p>
            <pre>python manage.py sync_rrhh</pre>
        </div>
    </div>
</div>

<h2 id="signals">Signals y receivers</h2>

<div class="section">
    <ul class="nav nav-tabs header">
        <li class="active">Receivers</li>
    </ul>
    <div class="content">
        <p>
            Los receivers contienen código que es ejecutado en respuesta a un evento ocurrido.
        </p>
        <table class="table table-striped table-condensed">
            <tr>
                <th>RECEPTOR</th>
                <th>DESCRIPCIÓN</th>
                <th>SEÑAL CAPTURADA</th>
            </tr>
            <tr>
                <td>update_user</td>
                <td>Actualiza la información del usuario actual almacenada en el modelo user a partir de un hash denominado attributes que se almacena en la sesión del usuario</td>
                <td>User.post_login</td>
            </tr>
        </table>
    </div>
</div>

<h2 id="webservices">Web Services</h2>

<div class="alert alert-warning">
WS_SERVER_URL contiene la dirección URL base de los <i>web services</i>.
Debe sobreescribirse con la <i>URL</i> donde cada universidad ha puesto su servidor.
</div>

<h3 class="page-header">Información para el perfil de usuario</h3>

<div class="section"><ul class="nav nav-tabs header"><li class="active">WS_COD_PERSONA</li></ul>
<div class="content">

<p>Retorna un código único de tipo entero por cada investigador.
Este código se guarda en el perfil de usuario, y se usa para identificar al investigador en el resto de <i>web services</i>.</p>

<p>Formato de las peticiones:</p>
<table class="table table-striped table-condensed">
    <tr>
        <th>VARIABLE</th>
        <th>VALOR</th>
        <th>DESCRIPCIÓN</th>
    </tr>
    <tr>
        <td>WS_COD_PERSONA</td>
        <td>WS_SERVER_URL + 'get_codpersona?nif=[número de identificación fiscal]'</td>
        <td>Retorna un código único que identifica al usuario en el resto de <i>web services</i>.</td>
    </tr>
</table>

Ejemplo de salida del Web Service:
<pre>
33184
</pre>

</div>

</div>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>